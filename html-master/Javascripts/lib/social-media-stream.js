jQuery(document).ready(function ($) { function sb_getwinsize() { var wsize = { winCurrentWidth: jQuery(window).width(), newWidth: 0, winCurrentHeight: jQuery(window).height(), newHeight: 0 }; var gapWidth = Math.round((wsize.winCurrentWidth * 15) / 100); var currentWidth = wsize.winCurrentWidth - gapWidth; wsize.newWidth = currentWidth - 10; var gapHeight = Math.round((wsize.winCurrentHeight * 5) / 100); var currentHeight = wsize.winCurrentHeight - gapHeight; wsize.newHeight = currentHeight - 30; return wsize; } var $wall = jQuery("#timeline_wall1modern").isotope({ itemSelector: ".sb-item", layoutMode: "masonry", getSortData: { dateid: function (itemElem) { return jQuery(itemElem).attr("id"); } }, percentPosition: true, masonry: { columnWidth: ".sb-isizer", gutter: ".sb-gsizer" }, transitionDuration: 400, originLeft: true, }); jQuery("#timeline_wall1modern .sb-thumb img").lazyload({ effect: "fadeIn", skip_invisible: true, container: jQuery("#sb_wall1modern"), appear: function () { $wall.isotope("layout"); } });                    /* layout wall on reload */                    function sb_reloadwall($wall) { jQuery(window).one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd", function (e) { setTimeout(function () { jQuery("#sb_wall1modern").trigger("resize"); }, 500); jQuery("#sb_wall1modern").trigger("scroll"); $wall.isotope("layout"); }); } sb_reloadwall($wall);                    /* set wall grid on container resize */                    jQuery(window).resize(function () { setTimeout(function () { jQuery(window).trigger("scroll"); }, 500); }); jQuery("#sb_wall1modern .filter-items").on("click", "span", function () { jQuery("#sb_wall1modern").find(".filter-label,.sb-filter").removeClass("active"); var filterValue = jQuery(this).addClass("active").attr("data-filter"); if (jQuery(this).hasClass("filter-label")) { $wall.isotope({ filter: function () { if (filterValue != "*") { if (jQuery(this).hasClass(filterValue.substring(1))) { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).addClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a.icbox, .sb-container .sb-thumb a.iframe").addClass("cboxElement"); } } else { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).removeClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a").removeClass("cboxElement"); } } return (jQuery(this).hasClass(filterValue.substring(1))); } else { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).addClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a.icbox, .sb-container .sb-thumb a.iframe").addClass("cboxElement"); } return filterValue; } } }); $wall.one("arrangeComplete", function () { jQuery("#sb_wall1modern").trigger("resize"); }); } }); jQuery("#sb_wall1modern .sb-search").keyup(function () { var filterValue = jQuery(this).val(); if (filterValue != "") { $wall.isotope({ filter: function () { if (jQuery(this).text().search(new RegExp(filterValue, "i")) > 0) { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).addClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a.icbox, .sb-container .sb-thumb a.iframe").addClass("cboxElement"); } } else { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).removeClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a").removeClass("cboxElement"); } } return (jQuery(this).text().search(new RegExp(filterValue, "i")) > 0); } }); } else { $wall.isotope({ filter: function () { if (jQuery(this).hasClass("sb-inline")) { jQuery(this).addClass("cboxElement"); } else { jQuery(this).find(".sb-container .sb-thumb a.icbox, .sb-container .sb-thumb a.iframe").addClass("cboxElement"); } return true; } }); } $wall.one("arrangeComplete", function () { jQuery("#sb_wall1modern").trigger("resize"); }); }); scrollStop(function () { $wall.isotope("layout"); jQuery(window).trigger("resize"); }, "sb_wall1modern"); jQuery("#sb_wall1modern").on("click", ".sb-loadmore", function () { lmobj = jQuery("#sb_wall1modern .sb-loadmore"); lmnonce = lmobj.attr("data-nonce"); jQuery('#sb_wall1modern .sb-loadmore').html('<p class="sb-loading">&nbsp;</p>'); jQuery.ajax({ type: "post", url: "https://www.terras-tiefbau.group/index.php?option=com_simplesocialmediastream&task=ajaxBoard&view=board&format=raw&" + lmnonce + "=1", data: { action: "sb_loadmore", attr: { "results": 9, "words": "40", "slicepoint": "300", "commentwords": "20", "titles": "15", "dateformat": "friendly", "userinfo": "top", "readmore": "1", "order": "date", "filters": "1", "filter_ads": "1", "display_all": "disabled", "loadmore": "1", "lightboxtype": "media", "layout_image": "imgexpand", "links": "1", "full_item_link": "1", "nofollow": "1", "https": "1", "lazyload": "1", "cache": "360", "crawl": "10", "timeout": "15", "debuglog": 0, "image_proxy": 0, "theme": 1, "display_ads": { "wall": "1", "timeline": "0", "feed": "0", "carousel": "0", "grid": "1" }, "default_filter": "instagram", "filters_order": ["instagram", "facebook", "twitter", "pinterest", "flickr", "youtube", "vimeo", "rss", "soundcloud", "vk"], "transition": "400", "stagger": "0", "filter_search": "1", "originLeft": "true", "wall_width": 0, "wall_height": 0, "fixWidth": "false", "breakpoints": ["3", "3", "2", "1", "1", "1", "1"], "itemwidth": "400", "showmore": 0, "gutterX": "30", "gutterY": "30", "id": 1, "type": "wall", "hover_effect": "no" }, nonce: lmnonce, label: "wall1modern" }, cache: false }).done(function (response) {                    /* append and layout items */                    var lmdata = jQuery(response); var $items = lmdata.filter(".sb-item"); var $slides = lmdata.filter(".sb-slide"); $wall.append($items).isotope("appended", $items); jQuery("#sb_slides_wall1modern").append($slides); jQuery(window).one("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd", function (e) { lmdata.find(".sb-thumb img").lazyload({ effect: "fadeIn", skip_invisible: true, container: jQuery("#sb_wall1modern"), appear: function () { $wall.isotope("layout"); } }); $wall.one("layoutComplete", function () { jQuery("#sb_wall1modern").trigger("resize"); }); $wall.isotope("layout"); }); jQuery(".sboard .sb-thumb .iframe").colorbox({ iframe: true, maxWidth: "85%", maxHeight: "95%", width: function () { var size = jQuery(this).data("size"); if (size) { sizearr = size.split(","); return parseInt(sizearr[0]) + 10; } else { return 640; } }, height: function () { var size = jQuery(this).data("size"); if (size) { sizearr = size.split(","); return parseInt(sizearr[1]) + 10; } else { return 460; } }, onComplete: function () { var size = jQuery(this).data("size"); if (size) { var sizearr = size.split(","); var iframebox = jQuery("#cboxLoadedContent iframe"); if (iframebox.length) { iframebox.attr("width", sizearr[0]).attr("height", sizearr[1]); } } } }); jQuery(".sboard .icbox, .sboard .sb-thumb .icbox").colorbox({ photo: true, href: function () { return jQuery(this).attr("href") ? jQuery(this).attr("href") : jQuery(this).data("href"); }, maxWidth: "95%", maxHeight: "95%", onComplete: function () { if (jQuery(this).closest(".timeline-row").attr("id")) { var _childs = "#childs_" + jQuery(this).closest(".timeline-row").attr("id"); } else { var _childs = "#childs_" + jQuery(this).closest(".sb-item").attr("id"); } if (jQuery(_childs).length) { var _childItems = jQuery(_childs).html(); jQuery("#cboxLoadedContent").append(_childItems + "<i></i><i></i>"); jQuery("#cboxLoadedContent").children("i").first().on("click", function () { var _ThisImgs = jQuery("#cboxLoadedContent").children("img"); _ThisImgs.each(function (i, v) { if (jQuery(this).css("display") != "none") { if (i == 0) { jQuery(this).hide(); _ThisImgs.last().show(); } else { jQuery(this).hide().prev().show(); } return false; } }); }); jQuery("#cboxLoadedContent").children("i").last().on("click", function () { var _ThisImgs = jQuery("#cboxLoadedContent").children("img"); _ThisImgs.each(function (i, v) { if (jQuery(this).css("display") != "none") { if (_ThisImgs.last().index() == i) { jQuery(this).hide(); _ThisImgs.first().show(); } else { jQuery(this).hide().next().show(); } return false; } }); }); } } }); jQuery(".sboard .inline, .sboard .sb-thumb .inline").colorbox({ inline: true, maxWidth: "95%", maxHeight: "95%" }); jQuery("#sb_wall1modern .sb-loadmore").html("<p>mehr laden</p>"); jQuery("#timeline_wall1modern").removeClass("loadmore-active"); }).fail(function () { alert("Problem reading the feed data!"); }); }); jQuery(".sboard").on("click", ".sb-fetchcomments a.sb-triggercomments", function () { fcobj = jQuery(this).parent(); fcnonce = fcobj.attr("data-nonce"); fcobj.html('<p class="sb-loading">&nbsp;</p>'); jQuery.ajax({ type: "post", url: "https://www.terras-tiefbau.group/index.php?option=com_simplesocialmediastream&task=ajaxBoard&view=board&format=raw&" + fcnonce + "=1", data: { action: "sb_fetchcomments", network: fcobj.attr("data-network"), attr: { "results": 9, "words": "40", "slicepoint": "300", "commentwords": "20", "titles": "15", "dateformat": "friendly", "userinfo": "top", "readmore": "1", "order": "date", "filters": "1", "filter_ads": "1", "display_all": "disabled", "loadmore": "1", "lightboxtype": "media", "layout_image": "imgexpand", "links": "1", "full_item_link": "1", "nofollow": "1", "https": "1", "lazyload": "1", "cache": "360", "crawl": "10", "timeout": "15", "debuglog": 0, "image_proxy": 0, "theme": 1, "display_ads": { "wall": "1", "timeline": "0", "feed": "0", "carousel": "0", "grid": "1" }, "default_filter": "instagram", "filters_order": ["instagram", "facebook", "twitter", "pinterest", "flickr", "youtube", "vimeo", "rss", "soundcloud", "vk"], "transition": "400", "stagger": "0", "filter_search": "1", "originLeft": "true", "wall_width": 0, "wall_height": 0, "fixWidth": "false", "breakpoints": ["3", "3", "2", "1", "1", "1", "1"], "itemwidth": "400", "showmore": 0, "gutterX": "30", "gutterY": "30", "id": 1, "type": "wall", "hover_effect": "no" }, id: fcobj.attr("data-id"), code: fcobj.attr("data-code") ? fcobj.attr("data-code") : "", feed: fcobj.attr("data-feed"), link: fcobj.attr("data-link"), label: "wall1modern" }, cache: false }).done(function (response) {                    /* replace comments */                    /* re-layout wall */                    fcobj.html(response).promise().done(function () { $wall.isotope("layout"); jQuery("#sb_wall1modern").trigger("scroll"); }); }).fail(function () { fcobj.html('<a href="javascript:void(0)" class="sb-triggercomments">Zeige Kommentare</a>'); alert("Problem reading the comments feed data!"); }); }); jQuery(".sboard .sb-thumb .iframe").colorbox({ iframe: true, maxWidth: "85%", maxHeight: "95%", width: function () { var size = jQuery(this).data("size"); if (size) { sizearr = size.split(","); return parseInt(sizearr[0]) + 10; } else { return 640; } }, height: function () { var size = jQuery(this).data("size"); if (size) { sizearr = size.split(","); return parseInt(sizearr[1]) + 10; } else { return 460; } }, onComplete: function () { var size = jQuery(this).data("size"); if (size) { var sizearr = size.split(","); var iframebox = jQuery("#cboxLoadedContent iframe"); if (iframebox.length) { iframebox.attr("width", sizearr[0]).attr("height", sizearr[1]); } } } }); jQuery(".sboard .icbox, .sboard .sb-thumb .icbox").colorbox({ photo: true, href: function () { return jQuery(this).attr("href") ? jQuery(this).attr("href") : jQuery(this).data("href"); }, maxWidth: "95%", maxHeight: "95%", onComplete: function () { if (jQuery(this).closest(".timeline-row").attr("id")) { var _childs = "#childs_" + jQuery(this).closest(".timeline-row").attr("id"); } else { var _childs = "#childs_" + jQuery(this).closest(".sb-item").attr("id"); } if (jQuery(_childs).length) { var _childItems = jQuery(_childs).html(); jQuery("#cboxLoadedContent").append(_childItems + "<i></i><i></i>"); jQuery("#cboxLoadedContent").children("i").first().on("click", function () { var _ThisImgs = jQuery("#cboxLoadedContent").children("img"); _ThisImgs.each(function (i, v) { if (jQuery(this).css("display") != "none") { if (i == 0) { jQuery(this).hide(); _ThisImgs.last().show(); } else { jQuery(this).hide().prev().show(); } return false; } }); }); jQuery("#cboxLoadedContent").children("i").last().on("click", function () { var _ThisImgs = jQuery("#cboxLoadedContent").children("img"); _ThisImgs.each(function (i, v) { if (jQuery(this).css("display") != "none") { if (_ThisImgs.last().index() == i) { jQuery(this).hide(); _ThisImgs.first().show(); } else { jQuery(this).hide().next().show(); } return false; } }); }); } } }); jQuery(".sboard .inline, .sboard .sb-thumb .inline").colorbox({ inline: true, maxWidth: "95%", maxHeight: "95%" }); jQuery(document).bind("cbox_complete", function () { jQuery(window).scrollTop(jQuery(window).scrollTop() + 1); }); jQuery(window).on("resize", function () { if (jQuery("#cboxOverlay").is(":visible")) { var wsize = sb_getwinsize(); var cbox = jQuery("#cboxLoadedContent"); var iframebox = jQuery("#cboxLoadedContent iframe"); if (iframebox.length) { var iframeWidth = iframebox.attr("width"); var iframeHeight = iframebox.attr("height"); if (jQuery(window).width() <= 767) { var pheight = Math.round((iframeHeight / iframeWidth) * 95); jQuery.colorbox.resize({ width: "95%", height: pheight + "%" }); } else { if (cbox.children("div.sb-slide").length > 0) { jQuery.colorbox.resize({ maxWidth: "95%", maxHeight: "95%" }); } else { if (iframeHeight > wsize.newHeight) { var newWidth = Math.round((wsize.newHeight * iframeWidth) / iframeHeight); iframeWidth = newWidth; iframeHeight = wsize.newHeight; if (iframeWidth > wsize.newWidth) { iframeWidth = wsize.newWidth; iframeHeight = wsize.newHeight; } } jQuery.colorbox.resize({ width: parseInt(iframeWidth) + 10, height: parseInt(iframeHeight) + 10 }); } } } else { jQuery.colorbox.resize({ maxWidth: "95%", maxHeight: "95%" }); } } }); jQuery(".sboard").FullBlockCoverage({ link: 1 }); });